<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Enigma Challenge</title>
    <link rel="stylesheet" href="s.css">
    <style>
        /* Basic CSS for simplicity */
        body {
            font-family: Arial, sans-serif;
            background-color: #f1f1f1; /* Light snow-like background */
            color: #333;
            text-align: center;
            padding: 0;
            margin: 0;
        }

        header {
            background-color: #b22222; /* Christmas red */
            color: white;
            padding: 40px 20px;
            text-align: center;
            background-image: url('https://www.transparenttextures.com/patterns/snowflakes.png');
            background-repeat: no-repeat;
            background-size: cover;
        }

        header h1 {
            font-size: 36px;
            font-family: 'Georgia', serif;
            margin-bottom: 10px;
        }

        header p {
            font-size: 18px;
            font-style: italic;
            margin-top: 0;
        }

        h2 {
            margin-bottom: 10px; /* Add some space below the h2 */
        }

        p {
            margin-top: 10px; /* Add some space above the p */
        }

                /* Christmas Tree Icon Styling */
        .enigma-list a {
            font-size: 20px;
            display: block;
            padding: 10px;
            color: #228b22; /* Forest green */
            text-decoration: none;
            margin: 10px 0;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .enigma-list a:hover {
            background-color: #ff6347; /* Tomato red */
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .enigma-list {
            list-style-type: none;
            padding: 0;
        }
        .enigma-list li {
            margin: 10px 0;
        }

        .enigma {
            background: white;
            border: 2px solid #ccc;
            margin: 20px;
            padding: 20px;
            border-radius: 8px;
        }
        input {
            padding: 5px;
            margin: 10px;
        }

        button {
            background-color: #228b22; /* Forest green */
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #006400; /* Dark green */
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .resolved {
            opacity: 0.5;
            pointer-events: none;
        }

        /* The Modal (background) */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black with opacity */
        }

        /* Modal Content */
        .modal-content {
            background-color: #fff;
            margin: 15% auto;
            padding: 30px;
            border: 2px solid #b22222; /* Christmas red border */
            width: 80%;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        /* The Close Button */
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }

        /* The cards */
        #the_card {
            text-align: center; /* Align content to the center */
            margin-top: 30px; /* Add some spacing from the top */
        }

        /* Ensure the heading and paragraph behave as block elements */
        h2 {
            margin-bottom: 20px; /* Add spacing between the heading and the paragraph */
            display: block;      /* Ensure block formatting */
        }

        p {
            margin-top: 10px; /* Add some spacing above the paragraph */
            display: block;   /* Ensure block formatting */
        }

        /* Flexbox layout for the cards */
        .cards-wrapper {
            display: flex;
            justify-content: center;
            gap: 20px; /* Space between cards */
            flex-wrap: wrap; /* Allow wrapping of cards if the screen is small */
            margin-top: 20px; /* Space between the heading and the cards */
        }

        .card-container {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        /* Card layout */
        .card {
            background-color: white;
            border-radius: 10px;
            width: 300px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column; /* Stack the content vertically */
        }

        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .card-header {
            color: white;
            padding: 15px;
            font-size: 24px;
            text-align: center;
            border-radius: 10px 10px 0 0;
        }

        .card-discovery {
            background-color: #4CAF50; 
        }

        .card-sport {
            background-color: #1E90FF; 
        }

        .card-exploration {
            background-color: #ff4b1e; 
        }

        /* Body of the card */
        .card-body {
            padding: 20px;
            font-size: 16px;
            color: #555;
        }

        .hidden {
            display: none;
        }

        /* Christmas decorations */
        .snowflakes {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            pointer-events: none;
            opacity: 0.7;
        }

        .snowflake {
            position: absolute;
            top: -10px;
            width: 10px;
            height: 10px;
            background-color: #fff;
            border-radius: 50%;
            animation: fall 10s linear infinite;
        }

        @keyframes fall {
            0% { top: -10px; }
            100% { top: 100vh; }
        }

        /* Footer Styling */
        footer {
            background-color: #b22222;
            color: white;
            padding: 10px;
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            font-size: 14px;
        }
        
    </style>
</head>

<body>
    <header>
        <h1>Stephane's secret Santa Christmas Challenge</h1>
        <p id="enigmas_count">Enigmas left: <span id="remaining-enigmas">3</span></p>
    </header>

    <div id="the_modals">  

        <ul class="enigma-list">
            <li><a href="#" id="link1" onclick="openModal(1)">üéÑ Enigma of the Lost Star</a></li>
            <li><a href="#" id="link2" onclick="openModal(2)">‚ùÑÔ∏è Riddle of the Frosty Trail</a></li>
            <li><a href="#" id="link3" onclick="openModal(3)">üéÅ Mystery of the Gift Keeper</a></li>
        </ul>

        <!-- The Modals -->
        
        <div id="modal1" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal(1)">&times;</span>
                <h2>Enigma 1: The Missing Letter</h2>
                <p>Find the next letter in the sequence: A, E, I, M, ...?</p>
                <input type="text" id="answer1" placeholder="Your answer">
                <button onclick="checkAnswer(1, 'q')">Submit</button>
            </div>
        </div>

        <div id="modal2" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal(2)">&times;</span>
                <h2>Enigma 2: Number Puzzle</h2>
                <p>What comes next? 2, 4, 8, 16, ...?</p>
                <input type="text" id="answer2" placeholder="Your answer">
                <button onclick="checkAnswer(2, '32')">Submit</button>
            </div>
        </div>

        <div id="modal3" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal(3)">&times;</span>
                <h2>Enigma 3: Final Riddle</h2>
                <p>I‚Äôm tall when I‚Äôm young, and short when I‚Äôm old. What am I?</p>
                <input type="text" id="answer3" placeholder="Your answer">
                <button onclick="checkAnswer(3, 'candle')">Submit</button>
            </div>
        </div>

    </div>

    <div id="the_card" class="card-container hidden">
        <!-- Gift Message -->
        <h2>Ton cadeau: un parcours de sp√©l√©ologie avec ton super Secret Santa.</h2>

    
        <!-- Cards Wrapper -->
        <div class="cards-wrapper">

            <!-- Card 1 -->
            <div class="card ">
                <div class="card-header card-discovery">
                    <h3>Niveau D√©couverte</h3>
                </div>
                <div class="card-body">
                    <p>Le niveau d√©couverte est adapt√© pour tout le monde y compris les plus jeunes. 
                        Les grottes sont majoritairement horizontales. 
                        La pr√©sence de quelques puits d‚Äôenviron 5m est possible mais non obligatoire. 
                        Leur descente s‚Äôeffectue avec un baudrier et un descendeur et leur remont√©e se fait par une main courante ou une escalade facile. 
                        L‚Äôactivit√© se d√©roule sur une demi-journ√©e pendant environ 3h00</p>
                </div>
            </div>
        
            <!-- Card 2 -->
            <div class="card ">
                <div class="card-header card-sport">
                    <h3>Niveau Sportif</h3>
                </div>
                <div class="card-body">
                    <p>Le niveau sportif est r√©serv√© √† des personnes sportives mais qui peuvent √™tre d√©butantes. 
                        La grotte contient le plus souvent des obstacles verticaux a descendre et √† remonter aux bloqueurs. 
                        Connaitre ces techniques n‚Äôest pas obligatoire, mais c‚Äôest un plus. 
                        Certaines grottes aquatiques n√©cessitent une combinaison n√©opr√®ne. 
                        L‚Äôactivit√© se d√©roule sur une journ√©e pour une dur√©e entre 5h00 et 8h00</p>
                </div>
            </div>
        
            <!-- Card 3 -->
            <div class="card">
                <div class="card-header card-exploration">
                    <h3>Niveau Exploration</h3>
                </div>
                <div class="card-body">
                    <p>Le niveau Exploration est r√©serv√© aux personnes autonomes sur cordes ou ayant d√©j√† pratiqu√© la sp√©l√©ologie sportive. 
                        Les grottes sont majoritairement verticales avec des puits pouvant atteindre plus de 30m de profondeur. 
                        L‚Äôactivit√© se d√©roule sur une grosse journ√©e pendant plus de 6h00</p>
                </div>
            </div>
        </div>
        <p>Contacter l'agence Secret Santa pour d√©finir une date et la difficult√© choisie.</p>
    </div>

....
    <script>
        let enigmasLeft = 3;
        let answers = ["q", "32", "candle"];

        // Disable the link to prevent modal from opening
        function disableLink(enigmaNumber) {
            document.getElementById(`link${enigmaNumber}`).onclick = function(event) {
                event.preventDefault(); // Prevent modal from opening
            };
            document.getElementById(`link${enigmaNumber}`).style.color = '#ccc'; // Change link color to indicate it's disabled
        }

        // Enable the link to allow modal to open again
        function enableLink(enigmaNumber) {
            document.getElementById(`link${enigmaNumber}`).onclick = function() {
                openModal(enigmaNumber);
            };
            document.getElementById(`link${enigmaNumber}`).style.color = ''; // Restore original color
        }

        function openModal(enigmaNumber) {
            document.getElementById(`modal${enigmaNumber}`).style.display = "block";
        }

        function closeModal(enigmaNumber) {
            document.getElementById(`modal${enigmaNumber}`).style.display = "none";
        }

        function checkAnswer(enigmaNumber, correctAnswer) {
            const userAnswer = document.getElementById(`answer${enigmaNumber}`).value.toLowerCase().trim();
            if (userAnswer === correctAnswer) {
                closeModal(enigmaNumber);
                alert(`üéâ Correct! Enigma ${enigmaNumber} solved!`);
                document.getElementById(`modal${enigmaNumber}`).classList.add('resolved');
                document.getElementById(`answer${enigmaNumber}`).disabled = true;
                document.querySelector(`#modal${enigmaNumber} button`).disabled = true;
                enigmasLeft--;
                document.getElementById("remaining-enigmas").textContent = enigmasLeft;

                // Disable the link after the enigma is solved
                disableLink(enigmaNumber);

                if (enigmasLeft <= 0) {
                    // now we have to implement the new voucher to be seen ...
                    document.getElementById('enigmas_count').classList.add('hidden');
                    document.getElementById('the_modals').classList.add('hidden');
                    document.getElementById('the_card').classList.remove('hidden');
                }

            } else {
                alert("‚ùå '" + userAnswer + "' is Wrong! Try again!");
            }
        }

        //christmas snowflakes:
        const snowflakes = document.createElement('div');
        snowflakes.classList.add('snowflakes');
        document.body.appendChild(snowflakes);

        // Create 50 snowflakes
        for (let i = 0; i < 50; i++) {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflakes.appendChild(snowflake);
            
            // Randomize snowflake position and size
            snowflake.style.left = `${Math.random() * 100}vw`;
            snowflake.style.animationDuration = `${Math.random() * 5 + 5}s`; // Randomize falling speed
            snowflake.style.animationDelay = `${Math.random() * 5}s`; // Randomize delay
            snowflake.style.width = `${Math.random() * 5 + 5}px`;
            snowflake.style.height = snowflake.style.width;
        }
    </script>
</body>
</html>
